/**
 * 文件操作模块
 */
var fs = require('fs');
var path = require('path');

/**
 * 判断文件存在
 * @param file
 * @returns {*}
 */
exports.exists = function(file){
    return fs.existsSync(file);
};

/**
 * 依次创建指定路径内所有不存在的文件夹
 * @param dir
 */
exports.mkdir = function(dir){
    var _path = [];
    while(!exports.exists(dir)){
        _path.push(path.basename(dir));
        dir = path.dirname(dir);
    }
    while(_path.length>0){
        dir = path.join(dir,_path.pop());
        fs.mkdirSync(dir);
    }
};

/**
 * 读取文件并转换为字符串
 * @param file
 * @returns {*}
 */
exports.readFile = function(file){
    if(exports.exists(file))
        return fs.readFileSync(file)+'';
    else
        return undefined;
};

/**
 * 读取指定文件夹下的所有文件
 * @param dir
 * @returns {*}
 */
exports.readdir = function(dir){
    if(exports.exists(dir))
        return fs.readdirSync(dir);
    else
        return [];
};

/**
 * 读取指定文件并转换为json数据
 * @param file
 * @returns {*}
 */
exports.readJson = function(file){
    if(exports.exists(file))
        return JSON.parse(fs.readFileSync(file)+'');
    else
        return undefined;
};