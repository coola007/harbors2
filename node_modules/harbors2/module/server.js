var _l_sync = require('../lib/sync');
var _l_multipart = require('./multipart');
var _m_session = require('../module/session');
var querystring = require('querystring');

exports.dyM = function(request){

    _l_sync('normal')

        .add(function(next){
            //解析cookie、session
            _m_session.analysis(request,next);
        })

        .add(function(next){
            //接收post
            _l_multipart(request,next);
        })

        .end(function(){
            require(request.path.Dir + request.path.Module)(request);
        });
};